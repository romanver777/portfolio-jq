"use strict";$(function(){function t(t){var n=$(".".concat(t)).css("background-image"),e=n.indexOf("style");return n.substring(e,n.length-2)}function n(t,n){return new Promise(function(e,o){var i={};"img"==n&&(i=new Image,i.src=t),"script"==n&&(i=document.createElement("script"),i.src=t,i.async=!1,document.body.appendChild(i)),i.addEventListener("load",function(){e()}),i.addEventListener("error",function(){o()})})}function e(){location.toString().indexOf("auth")!==-1&&($(".auth__link").hide(),$("#flipbox").toggleClass("flipped")),$(".container-index").css({display:"flex"})}function o(){$(".main").fadeIn("slow"),$(".slider").length&&f(),$("#map").length&&d()}function i(t,n){$(t).hasClass("wrap__header_blog")||($(t).height($(window).innerHeight()+"px"),"firstPage"===n&&(document.querySelector(t).style.position="fixed"))}function a(){$("#svg_loader").fadeOut("slow"),$(".preloader").addClass("hided")}function l(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in document.documentElement}function c(){if(l())$(".container-index").length?($(".container-index").addClass("bg-forest-index").addClass("bg-size-cover"),n(t("bg-forest-index"),"img").then(function(){setTimeout(function(){e(),i("body","firstPage"),a()},500)}).catch(function(){console.log("something wrong")})):n(t("bg-forest-index"),"img").then(function(){if($(".wrap-comments").length)return n(t("wrap-comments"),"img")}).then(function(){setTimeout(function(){o(),i(".bg-forest-index","otherPages"),a()},500)}).catch(function(){console.log("something wrong")});else if($(".container-index").length){var c="./js/water.min.js",s="./style/img/content/bg_forest_1800.jpg",r="./style/img/content/water-maps.jpg";n(c,"script").then(function(){return n(r,"img")}).then(function(){return n(s,"img")}).then(function(){setTimeout(function(){e(),a()},500)}).catch(function(){console.log("something wrong")})}else n(t("bg-forest-index"),"img").then(function(){if($(".wrap-comments").length)return n(t("wrap-comments"),"img")}).then(function(){setTimeout(function(){o(),a()},500)}).catch(function(){console.log("something wrong")})}function s(t){return t.getBoundingClientRect().top}function r(t){var n=$(".slider__pict").width(),e=$(".pict__wr"),o=$(".p-card-wr"),i=$(".slider__control").height(),a=$(".control-up__wr"),l=$(".control-down__wr"),c=e.position().left-n,s=a.position().top-i;switch(t){case"forward":e.animate({left:c},800,function(){e.find(".pict__item:first").appendTo(e).parent().css({left:0})}),a.animate({top:s},800,function(){a.find(".control-up__item:first").appendTo(a).parent().css({top:0})}),l.animate({top:s},800,function(){l.find(".control-down__item:first").appendTo(l).parent().css({top:0})}),o.find(".p-card:first").fadeOut(300),o.find(".p-card:first").removeClass("p-card_active").appendTo(o),o.find(".p-card:first").delay(300).fadeIn(200);break;case"backward":e.find(".pict__item:last").prependTo(e).parent().css({left:c}).animate({left:0},800),l.find(".control-down__item:last").prependTo(l).parent().css({top:s}).animate({top:0},800),a.find(".control-up__item:last").prependTo(a).parent().css({top:s}).animate({top:0},800),o.find(".p-card:first").fadeOut(300).removeClass("p-card_active"),o.find(".p-card:last").prependTo(o).delay(300).fadeIn(200)}}function f(){var t=$(".slider__pict").width(),n=$(".slider__control").height();$(".pict__item").css({width:t}),$(".control__item").css({height:n})}function p(){$(".menu-pop").delay(100).animate({height:0},200,function(){$(".close__link").removeAttr("style"),$(".gamburger__link").animate({opacity:1},100),$(".menu-pop").css({display:"none"}),$(".menu-pop__list").css({opacity:0}),$("body").removeClass("stop-scroll-but-visible")})}function d(){var t=$(window).width();t>1200&&u(82.902,55.013,12.8),t>899&&t<1201&&u(82.92,55.013,14.8),t>768&&t<900&&u(82.9216,55.013,14.8),t>550&&t<769&&u(82.92,55.013,14),t<551&&u(82.928,55.02,13)}function u(t,n,e){mapboxgl.accessToken="pk.eyJ1IjoiY29udHJhNzciLCJhIjoiY2p0anR2MWEwMnZrMjN5cDhsbXczeDJ1cSJ9.Q9r4aUzdARiggKd4gEmFDA";var o=new mapboxgl.Map({container:"map",style:"mapbox://styles/contra77/cju1na88e1fs41fpme09mg25a",center:[t,n],zoom:e});o.scrollZoom.disable(),$(window).width()>550&&o.addControl(new mapboxgl.NavigationControl,"top-left");new mapboxgl.Marker({color:"#82a073"}).setLngLat([82.929158,55.012969]).addTo(o)}function _(t){$(".alertWindow").text(t),$(".alertWindow-wr").css({display:"flex"}),setTimeout(function(){$(".alertWindow-wr").toggleClass("hide")},100)}!function(){$(".auth__link").click(function(t){t.preventDefault(),$(this).hide(),$("#flipbox").toggleClass("flipped")}),$(".butt__link_home").click(function(t){t.preventDefault(),$(".auth__link").show(),$("#flipbox").toggleClass("flipped")})}(),function(){function t(t){t.preventDefault();var n=$(window).height();$("body, html").animate({scrollTop:n},1e3)}$(".arrow-down__link").click(function(n){return t(n)}),$(".arrow-up__link").click(function(n){return t(n)})}(),function(){var t=$(".blog-left");t.length&&($(".blog").offset().top<=0?$(".blog-left__link").show():$(".blog-left__link").hide(),$(".blog-left__link").click(function(n){n.preventDefault(),n.stopPropagation(),t.hasClass("opened")?(t.toggleClass("opened"),t.toggleClass("closed")):(t.toggleClass("opened"),t.removeClass("closed"))}),$(".blog__nav").click(function(n){n.preventDefault(),n.stopPropagation(),t.hasClass("opened")&&(t.toggleClass("opened"),t.toggleClass("closed"))}))}(),function(){$(".blog__list a").click(function(t){t.preventDefault(),t.stopPropagation();var n=15,e=$(t.target).attr("href").slice(1),o=$("#".concat(e)).offset().top-n;$("body, html").animate({scrollTop:o},1e3)})}(),function(){$(".blog").length&&$(window).scrollTop()>$(".blog__nav").offset().top&&$(".blog__list").addClass("blog_fixed")}(),$(window).scroll(function(){var t=$(".blog__list");if(t.length){$(window).scrollTop()+25>=$(".blog__nav").offset().top?(t.addClass("blog_fixed"),t.removeClass("blog_relative")):(t.removeClass("blog_fixed"),t.addClass("blog_relative")),$(".article").each(function(t,n){var e=$(".blog__item a");if(s(n)>0&&s(n)<150){var o="#"+$(n).attr("id");e.each(function(t,n){var e=$(n).attr("href");$(n).removeClass("blog__link_act"),e==o&&$('[href="'+e+'"]').addClass("blog__link_act")})}})}}),function(){$(window).on("scroll",function(){if($(".about__skills").length){var t=[50,38,80,24,16,55,18,60,25,47];$(".about__skills").offset().top-$(window).scrollTop()<50&&$(".circles__sector").each(function(n,e){setTimeout(function(){$(e).css({"stroke-dashoffset":"".concat(2.826*t[n])})},0+100*n)})}})}(),function(){$(".control-down__link").click(function(t){t.preventDefault(),t.stopPropagation(),r("backward")}),$(".control-up__link").click(function(t){t.preventDefault(),t.stopPropagation(),r("forward")})}(),$(window).resize(function(){f()}),function(){$(".gamburger__link").click(function(t){t.preventDefault(),$(".menu-pop").css({display:"flex"}).delay(100).animate({height:"100vh"},200,function(){$(".menu-pop__list").animate({opacity:1},200),$(".gamburger__link").animate({opacity:0},200),$(".menu-pop__item").each(function(t,n){$(n).css({"animation-delay":"".concat(.1*t,"s")}).css({"animation-name":"bounceIn"})}),$(".close__link").css({"animation-name":"bounceIn"}).animate({opacity:1},200)}),$("body").addClass("stop-scroll-but-visible"),setTimeout(function(){$(".menu-pop__item").removeAttr("style"),$(".close__link").removeAttr("style").css({opacity:1})},1200)}),$(".close__link").click(function(t){t.preventDefault(),t.stopPropagation(),p()}),$(".menu-pop__link").click(function(){p()}),$(".menu-pop__item_active").click(function(t){t.stopPropagation(),t.preventDefault(),p()})}(),function(){$(".form-auth").length&&($(".butt__link_login").on("click",function(t){t.preventDefault(),""!==$.trim($(".form__name").val())?""!==$.trim($(".form__pass").val())?_($(".checkbox__input").is(":checked")?$(".radio-btn__input_yes").is(":checked")?"Неправильный логин или пароль":"Роботам вход воспрещен":"Роботам вход воспрещен"):(_("Введите пароль"),$(".form__pass").val("")):(_("Введите Логин"),$(".form__name").val(""))}),$(".butt__link_home").on("click",function(t){$(".form-auth")[0].reset()}))}(),function(){$(".form-log").length&&($(".butt__link_send").on("click",function(t){t.preventDefault(),""!==$.trim($(".form__inp-contact_name").val())?""!==$.trim($(".form__inp-contact_email").val())&&/@/.test($(".form__inp-contact_email").val())?""!==$.trim($(".form__textarea").val())?_("Сообщение отправлено"):(_("Введите сообщение"),$(".form__textarea").val("")):(_("Введите почту"),$(".form__inp-contact_email").val("")):(_("Введите имя"),$(".form__inp-contact_name").val(""))}),$(".butt__link_clear").on("click",function(t){t.preventDefault(),$(".form-log")[0].reset()}))}(),function(){$("body").append('<div class="alertWindow-wr"><p class="alertWindow"></p></div>'),$(".alertWindow-wr").toggleClass("hide")}(),$(document).on("click",function(t){$(t.target).closest($(".alertWindow-wr")).length&&($(".alertWindow-wr").toggleClass("hide"),setTimeout(function(){$(".alertWindow-wr").css({display:"none"})},400)),t.stopPropagation()}),c()});